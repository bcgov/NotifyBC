<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" type="image/x-icon" href="/NotifyBC/preview/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title>Installation | NotifyBC</title><meta name="description" content="A versatile notification API server">
    <link rel="preload" href="/NotifyBC/preview/assets/style-8fbc3cfb.css" as="style"><link rel="stylesheet" href="/NotifyBC/preview/assets/style-8fbc3cfb.css">
    <link rel="modulepreload" href="/NotifyBC/preview/assets/app-bafea29c.js"><link rel="modulepreload" href="/NotifyBC/preview/assets/index.html-c3e1b8a9.js"><link rel="modulepreload" href="/NotifyBC/preview/assets/index.html-963a4ecf.js"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-692e45cb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7d2ae716.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-74e8fbb1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-15fde261.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-d6481ba1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-09f857ca.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-70c61dd5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-3d37ae4c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f8b7a659.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-ced62edd.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-88fcd172.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a2d4ab5c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6b858d80.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-549ff1f9.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6e94f439.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c46be575.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a70b6cf1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a9eb55a1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f9768eb1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6bb621c5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-bc520f9b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-42466a4a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-3bc7b1c6.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-caa38aac.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-34c15120.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-2fb78bd6.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-1d87c569.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a0e9a4ad.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-76d114a5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-1406bc99.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-fae03536.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6ca7c7e1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-568e376b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-ccd9b97c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-4c2b215a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-602c2540.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-087df591.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-70fa60b0.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-79a4bc13.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-152a6b56.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-bcb6cef1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-3a8da429.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f681bedb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-294caab1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-000206cd.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-3d536578.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-5fa692b3.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c3332204.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-8bc89ded.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6068ff5c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-fa461d40.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-8ab9fcaf.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-9535a0b6.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-8e7ae302.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c8d4745b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-03241665.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-e6e71bc4.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f85c4244.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-22a233fa.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-db47db17.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6405b140.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-aea4a71b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c607d939.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-37cdbc37.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-087b7381.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a83300ea.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a6f26a24.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-fe811688.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6028705f.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-074fa226.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-cfc71d22.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-42313eea.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/404.html-322e0d0a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index-5161ad19.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><div class="nb-navbar-brand"><a href="/NotifyBC/preview/" class=""><img class="logo" src="/NotifyBC/preview/img/logo.svg" alt="NotifyBC"></a><!----></div></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/NotifyBC/preview/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/docs/" class="router-link-active" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/help/" class="" aria-label="Help"><!--[--><!--]--> Help <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/notifybc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/NotifyBC/preview/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/docs/" class="router-link-active" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/help/" class="" aria-label="Help"><!--[--><!--]--> Help <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/notifybc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">Getting Started <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/" class="router-link-active sidebar-item" aria-label="Welcome"><!--[--><!--]--> Welcome <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/overview/" class="sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/quickstart/" class="sidebar-item" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/installation/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/NotifyBC/preview/docs/installation/#deploy-locally-from-source-code" class="router-link-active router-link-exact-active sidebar-item" aria-label="Deploy locally from Source Code"><!--[--><!--]--> Deploy locally from Source Code <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/installation/#deploy-to-kubernetes" class="router-link-active router-link-exact-active sidebar-item" aria-label="Deploy to Kubernetes"><!--[--><!--]--> Deploy to Kubernetes <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/installation/#deploy-docker-container" class="router-link-active router-link-exact-active sidebar-item" aria-label="Deploy Docker Container"><!--[--><!--]--> Deploy Docker Container <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/NotifyBC/preview/docs/web-console/" class="sidebar-item" aria-label="Web Console"><!--[--><!--]--> Web Console <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/what&#39;s-new/" class="sidebar-item" aria-label="What&#39;s New"><!--[--><!--]--> What&#39;s New <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Configuration <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/config-overview/" class="sidebar-item" aria-label="Configuration Overview"><!--[--><!--]--> Configuration Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-database/" class="sidebar-item" aria-label="Database"><!--[--><!--]--> Database <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-adminIpList/" class="sidebar-item" aria-label="Admin IP List"><!--[--><!--]--> Admin IP List <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-reverseProxyIpLists/" class="sidebar-item" aria-label="Reverse Proxy IP Lists"><!--[--><!--]--> Reverse Proxy IP Lists <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-httpHost/" class="sidebar-item" aria-label="HTTP Host"><!--[--><!--]--> HTTP Host <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-internalHttpHost/" class="sidebar-item" aria-label="Internal HTTP Host"><!--[--><!--]--> Internal HTTP Host <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-email/" class="sidebar-item" aria-label="Email"><!--[--><!--]--> Email <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-sms/" class="sidebar-item" aria-label="SMS"><!--[--><!--]--> SMS <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-subscription/" class="sidebar-item" aria-label="Subscription"><!--[--><!--]--> Subscription <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-notification/" class="sidebar-item" aria-label="Notification"><!--[--><!--]--> Notification <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-nodeRoles/" class="sidebar-item" aria-label="Node Roles"><!--[--><!--]--> Node Roles <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-cronJobs/" class="sidebar-item" aria-label="Cron Jobs"><!--[--><!--]--> Cron Jobs <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-rsaKeys/" class="sidebar-item" aria-label="RSA Keys"><!--[--><!--]--> RSA Keys <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-workerProcessCount/" class="sidebar-item" aria-label="Worker Process Count"><!--[--><!--]--> Worker Process Count <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-middleware/" class="sidebar-item" aria-label="Middleware"><!--[--><!--]--> Middleware <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-oidc/" class="sidebar-item" aria-label="OIDC"><!--[--><!--]--> OIDC <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-certificates/" class="sidebar-item" aria-label="TLS Certificates"><!--[--><!--]--> TLS Certificates <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">API <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/api-overview/" class="sidebar-item" aria-label="API Overview"><!--[--><!--]--> API Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-subscription/" class="sidebar-item" aria-label="Subscription"><!--[--><!--]--> Subscription <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-notification/" class="sidebar-item" aria-label="Notification"><!--[--><!--]--> Notification <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-config/" class="sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-administrator/" class="sidebar-item" aria-label="Administrator"><!--[--><!--]--> Administrator <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-bounce/" class="sidebar-item" aria-label="Bounce"><!--[--><!--]--> Bounce <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Miscellaneous <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/benchmarks/" class="sidebar-item" aria-label="Benchmarks"><!--[--><!--]--> Benchmarks <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/bulk-import/" class="sidebar-item" aria-label="Bulk Import"><!--[--><!--]--> Bulk Import <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/developer-notes/" class="sidebar-item" aria-label="Developer Notes"><!--[--><!--]--> Developer Notes <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/upgrade/" class="sidebar-item" aria-label="Upgrade Guide"><!--[--><!--]--> Upgrade Guide <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Meta <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/conduct/" class="sidebar-item" aria-label="Code of Conduct"><!--[--><!--]--> Code of Conduct <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/acknowledgments/" class="sidebar-item" aria-label="Acknowledgments"><!--[--><!--]--> Acknowledgments <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="installation" tabindex="-1"><a class="header-anchor" href="#installation" aria-hidden="true">#</a> Installation</h1><p><em>NotifyBC</em> can be installed in 3 ways:</p><ol><li><a href="#deploy-locally-from-source-code">Deploy locally from Source Code</a></li><li><a href="#deploy-to-kubernetes">Deploy to Kubernetes</a></li><li><a href="#deploy-docker-container">Deploy Docker Container</a></li></ol><p>For the purpose of evaluation, both source code and docker container will do. For production, the recommendation is one of</p><ul><li>deploying to Kubernetes</li><li>setting up a load balanced app cluster from source code build, backed by MongoDB.</li></ul><p>To setup a development environment in order to contribute to <em>NotifyBC</em>, installing from source code is preferred.</p><h2 id="deploy-locally-from-source-code" tabindex="-1"><a class="header-anchor" href="#deploy-locally-from-source-code" aria-hidden="true">#</a> Deploy locally from Source Code</h2><h3 id="system-requirements" tabindex="-1"><a class="header-anchor" href="#system-requirements" aria-hidden="true">#</a> System Requirements</h3><ul><li>Software <ul><li>Git</li><li><a href="https://nodejs.org" target="_blank" rel="noopener noreferrer">Node.js<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>@&gt;=18</li><li>openssl (if enable HTTPS)</li></ul></li><li>Services <ul><li>MongoDB, optional but recommended for production</li><li>A standard SMTP server to deliver outgoing email, optional but recommended for production.</li><li>A tcp proxy server such as <a href="http://nginx.org/en/docs/stream/ngx_stream_proxy_module.html" target="_blank" rel="noopener noreferrer">nginx stream proxy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> if list-unsubscribe by email is needed and <em>NotifyBC</em> server cannot expose port 25 to internet</li><li>A SMS service provider if needs to enable SMS channel. The supported service providers are <ul><li>Twilio (default)</li><li>Swift</li></ul></li><li>Redis, optional but recommended if SMS is enabled</li><li>SiteMinder, if needs SiteMinder authentication</li><li>An OIDC provider, if needs OIDC authentication</li></ul></li><li>Network and Permissions <ul><li>Minimum runtime firewall requirements: <ul><li>outbound to your ISP DNS server</li><li>outbound to any on port 80 and 443 in order to run build scripts and send SMS messages</li><li>outbound to any on SMTP port 25 if using direct mail; for SMTP relay, outbound to your configured SMTP server and port only</li><li>inbound to listening port (3000 by default) from other authorized server ips</li><li>if <em>NotifyBC</em> instance will handle anonymous subscription from client browser, the listening port should be open to internet either directly or indirectly through a reverse proxy; If <em>NotifyBC</em> instance will only handle SiteMinder authenticated webapp requests, the listening port should NOT be open to internet. Instead, it should only open to SiteMinder web agent reverse proxy.</li></ul></li><li>If list-unsubscribe by email is needed, then one of the following must be met <ul><li><em>NotifyBC</em> can bind to port 25 opening to internet</li><li>a tcp proxy server of which port 25 is open to internet. This proxy server can reach <em>NotifyBC</em> on a tcp port.</li></ul></li></ul></li></ul><h3 id="installation-1" tabindex="-1"><a class="header-anchor" href="#installation-1" aria-hidden="true">#</a> Installation</h3><p>Run following commands</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/bcgov/NotifyBC.git
<span class="token builtin class-name">cd</span> NotifyBC
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> <span class="token function">yarn</span> <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">yarn</span> build
<span class="token function">yarn</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If successful, you will see following output</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>...
Server is running at http://0.0.0.0:3000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Now open <a href="http://localhost:3000" target="_blank" rel="noopener noreferrer">http://localhost:3000<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. The page displays NotifyBC Web Console.</p><p>The above commands installs the <em>main</em> version, i.e. main branch tip of <em>NotifyBC</em> GitHub repository. To install a specific version, say <em>v2.1.0</em>, run</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">git</span> checkout tags/v2.1.0 <span class="token parameter variable">-b</span> v2.1.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>after <code>cd NotifyBC</code>. A list of versions can be found <a href="https://github.com/bcgov/NotifyBC/tags" target="_blank" rel="noopener noreferrer">here<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><div class="custom-container tip"><p class="custom-container-title">install from behind firewall</p><p>If you want to install on a server behind firewall which restricts internet connection, you can work around the firewall as long as you have access to a http(s) forward proxy server. Assuming the proxy server is http://my_proxy:8080 which proxies both http and https requests, to use it:</p><ul><li><p>For Linux</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://my_proxy:8080
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://my_proxy:8080
<span class="token function">git</span> config <span class="token parameter variable">--global</span> url.<span class="token string">&quot;https://&quot;</span>.insteadOf git://
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>For Windows</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.proxy http://my_proxy:8080
<span class="token function">git</span> config <span class="token parameter variable">--global</span> url.<span class="token string">&quot;https://&quot;</span>.insteadOf git://
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> proxy http://my_proxy:8080
<span class="token function">npm</span> i <span class="token parameter variable">-g</span> <span class="token function">yarn</span>
<span class="token function">yarn</span> config <span class="token builtin class-name">set</span> proxy http://my_proxy:8080
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></div><h4 id="install-windows-service" tabindex="-1"><a class="header-anchor" href="#install-windows-service" aria-hidden="true">#</a> Install Windows Service</h4><p>After get the app running interactively, if your server is Windows and you want to install the app as a Windows service, run</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install -g node-windows
npm link node-windows
node windows-service.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will create and start service <em>notifyBC</em>. To change service name, modify file <em>windows-service.js</em> before running it. See <a href="https://github.com/coreybutler/node-windows" target="_blank" rel="noopener noreferrer">node-windows<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for other operations such as uninstalling the service.</p><h2 id="deploy-to-kubernetes" tabindex="-1"><a class="header-anchor" href="#deploy-to-kubernetes" aria-hidden="true">#</a> Deploy to Kubernetes</h2><p><em>NotifyBC</em> provides a <a href="https://github.com/orgs/bcgov/packages/container/package/notify-bc" target="_blank" rel="noopener noreferrer">container package<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> in GitHub Container Registry and a <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer">Helm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> chart to facilitate Deploying to Kubernetes. Azure AKS and OpenShift are the two tested platforms. Other Kubernetes platforms are likely to work subject to customizations. Before deploying to AKS, <a href="https://docs.microsoft.com/en-us/azure/aks/ingress-basic#create-an-ingress-controller" target="_blank" rel="noopener noreferrer">create an ingress controller <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>The deployment can be initiated from localhost or automated by CI service such as Jenkins. Regardless, at the initiator&#39;s side following software needs to be installed:</p><ul><li>git</li><li>Platform-specific CLI such as <a href="https://docs.microsoft.com/en-us/cli/azure/" target="_blank" rel="noopener noreferrer">Azure CLI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> or <a href="https://docs.openshift.org/latest/cli_reference/index.html" target="_blank" rel="noopener noreferrer">OpenShift CLI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener noreferrer">Helm CLI<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><p>To install,</p><ol><li><p>Follow your platform&#39;s instruction to login to the platform. For AKS, run <code>az login</code> and <code>az aks get-credentials</code>; for OpenShift, run <code>oc login</code></p></li><li><p>Run</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/bcgov/NotifyBC.git
<span class="token builtin class-name">cd</span> NotifyBC
helm <span class="token function">install</span> <span class="token parameter variable">-gf</span> helm/platform-specific/<span class="token operator">&lt;</span>platform<span class="token operator">&gt;</span>.yaml helm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>replace &lt;platform&gt; with <em>openshift</em> or <em>aks</em> depending on your platform.</p><p>The above commands create following artifacts:</p><ul><li>A MongoDB cluster with 2 nodes and 1 arbiter, each implemented as a stateful set</li><li>Two deployments - <em>notify-bc-app</em> and <em>notify-bc-cron</em></li><li>One HPA - <em>notify-bc-cron</em></li><li>Four services - <em>notify-bc</em>, <em>notify-bc-smtp</em>, <em>mongodb-headless</em> and <em>mongodb-arbiter-headless</em></li><li>Two PVCs each for one MongoDB node</li><li>Two config maps - <em>notify-bc</em> and <em>mongodb-scripts</em></li><li>Two service accounts - <em>notify-bc</em> and <em>mongodb</em></li><li>One more more secrets, with the most important one being <em>mongodb</em>, containing MongoDB connection credentials</li><li>On AKS, <ul><li>a <em>notify-bc</em> ingress</li></ul></li><li>On OpenShift, <ul><li>2 routes - <em>notify-bc-web</em> and <em>notify-bc-smtp</em></li></ul></li></ul></li></ol><p>To upgrade,</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm upgrade <span class="token operator">&lt;</span>release-name<span class="token operator">&gt;</span> <span class="token parameter variable">-f</span> helm/platform-specific/<span class="token operator">&lt;</span>platform<span class="token operator">&gt;</span>.yaml <span class="token parameter variable">--set</span> <span class="token assign-left variable">mongodb.auth.rootPassword</span><span class="token operator">=</span><span class="token operator">&lt;</span>mongodb-root-password<span class="token operator">&gt;</span> <span class="token parameter variable">--set</span> <span class="token assign-left variable">mongodb.auth.replicaSetKey</span><span class="token operator">=</span><span class="token operator">&lt;</span>mongodb-replica-set-key<span class="token operator">&gt;</span> <span class="token parameter variable">--set</span> <span class="token assign-left variable">mongodb.auth.password</span><span class="token operator">=</span><span class="token operator">&lt;</span>mongodb-password<span class="token operator">&gt;</span> helm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>replace &lt;release-name&gt; with installed helm release name and &lt;platform&gt; with <em>openshift</em> or <em>aks</em> depending on your platform. MongoDB credentials &lt;mongodb-root-password&gt;, &lt;mongodb-replica-set-key&gt; and &lt;mongodb-password&gt; can be found in secret <em>&lt;release-name&gt;-mongodb</em>. It is recommended to specify mongodb credentials in a file rather than command line. See <a href="#customizations">Customizations</a> below.</p><p>To uninstall,</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm uninstall <span class="token operator">&lt;</span>release-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>replace &lt;release-name&gt; with installed helm release name.</p><h3 id="customizations" tabindex="-1"><a class="header-anchor" href="#customizations" aria-hidden="true">#</a> Customizations</h3><p>Various customizations can be made to chart. Some are platform dependent. To customize, first create a file with extension <em>.local.yaml</em>. The rest of the document assumes the file is <em>helm/values.local.yaml</em>. Then add customized parameters to the file. See <em>helm/values.yaml</em> and Bitnami MongoDB chart <a href="https://github.com/bitnami/charts/tree/master/bitnami/mongodb" target="_blank" rel="noopener noreferrer">readme<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for customizable parameters. Parameters in <em>helm/values.local.yaml</em> overrides corresponding ones in <em>helm/values.yaml</em>. In particular, parameters under <em>mongodb</em> of <em>helm/values.local.yaml</em> overrides Bitnami MongoDB chart parameters.</p><p>To apply customizations, add <code>-f helm/values.local.yaml</code> to the helm command after <code>-f helm/platform-specific/&lt;platform&gt;.yaml</code>. For example, to install chart with customization on OpenShift,</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm <span class="token function">install</span> <span class="token parameter variable">-gf</span> helm/platform-specific/openshift.yaml <span class="token parameter variable">-f</span> helm/values.local.yaml helm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>to upgrade an existing release with customization on OpenShift,</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm upgrade <span class="token operator">&lt;</span>release-name<span class="token operator">&gt;</span> <span class="token parameter variable">-f</span> helm/platform-specific/openshift.yaml <span class="token parameter variable">-f</span> helm/values.local.yaml helm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Backup <i>helm/values.local.yaml</i></p><p>Backup <em>helm/values.local.yaml</em> to a private secured SCM is highly recommended, especially for production environment.</p></div><p>Following are some common customizations</p><ul><li><p>Update <em>config.local.js</em> in ConfigMap, for example to define <em>httpHost</em></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">configMap</span><span class="token punctuation">:</span>
  <span class="token key atrule">config.local.js</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
    module.exports = <span class="token punctuation">{</span>
      <span class="token key atrule">httpHost</span><span class="token punctuation">:</span> <span class="token string">&#39;https://myNotifyBC.myOrg.com&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Set hostname on AKS,</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">host</span><span class="token punctuation">:</span> myNotifyBC.myOrg.com
      <span class="token key atrule">paths</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">path</span><span class="token punctuation">:</span> /
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Use <a href="https://docs.microsoft.com/en-us/azure/aks/ingress-tls" target="_blank" rel="noopener noreferrer">Let&#39;s Encrypt on AKS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>. After following the instructions in the link, add following ingress customizations to file <em>helm/values.local.yaml</em></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">ingress</span><span class="token punctuation">:</span>
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">cert-manager.io/cluster-issuer</span><span class="token punctuation">:</span> letsencrypt
  <span class="token key atrule">tls</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">secretName</span><span class="token punctuation">:</span> tls<span class="token punctuation">-</span>secret
      <span class="token key atrule">hosts</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> notify<span class="token punctuation">-</span>bc.local
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Route host names on Openshift are by default auto-generated. To set to fixed values</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">route</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;myNotifyBC.myOrg.com&#39;</span>
  <span class="token key atrule">smtp</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> <span class="token string">&#39;smtp.myNotifyBC.myOrg.com&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Add certificates to OpenShift web route</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">route</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">tls</span><span class="token punctuation">:</span>
      <span class="token key atrule">caCertificate</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>BEGIN CERTIFICATE<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
        <span class="token punctuation">...</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>END CERTIFICATE<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
      <span class="token key atrule">certificate</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>BEGIN CERTIFICATE<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
        <span class="token punctuation">...</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>END CERTIFICATE<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
      <span class="token key atrule">insecureEdgeTerminationPolicy</span><span class="token punctuation">:</span> Redirect
      <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token punctuation">-</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>BEGIN PRIVATE KEY<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
        <span class="token punctuation">...</span>
        <span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>END PRIVATE KEY<span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>MongoDb</p><p><em>NotifyBC</em> chart depends on <a href="https://github.com/bitnami/charts/tree/master/bitnami/mongodb" target="_blank" rel="noopener noreferrer">Bitnami MongoDB chart<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for MongoDB database provisioning. All documented parameters are customizable under <em>mongodb</em>. For example, to change <em>architecture</em> to <em>standalone</em></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
  <span class="token key atrule">architecture</span><span class="token punctuation">:</span> standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To set credentials,</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
  <span class="token key atrule">auth</span><span class="token punctuation">:</span>
    <span class="token key atrule">rootPassword</span><span class="token punctuation">:</span> &lt;secret<span class="token punctuation">&gt;</span>
    <span class="token key atrule">replicaSetKey</span><span class="token punctuation">:</span> &lt;secret<span class="token punctuation">&gt;</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> &lt;secret<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To install a Helm chart, the above credentials can be randomly defined. To upgrade an existing release, they must match what&#39;s defined in secret <em>&lt;release-name&gt;-mongodb</em>.</p></li><li><p>Redis</p><p><em>NotifyBC</em> chart depends on <a href="https://github.com/bitnami/charts/tree/master/bitnami/redis" target="_blank" rel="noopener noreferrer">Bitnami Redis chart<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for Redis provisioning. All documented parameters are customizable under <em>redis</em>. For example, to set credential</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">redis</span><span class="token punctuation">:</span>
  <span class="token key atrule">auth</span><span class="token punctuation">:</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> &lt;secret<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To install a Helm chart, the above credential can be randomly defined. To upgrade an existing release, It must match what&#39;s defined in secret <em>&lt;release-name&gt;-redis</em>.</p></li><li><p>Both Bitnami MongoDB and Redis use Docker Hub for docker registry. Rate limit imposed by Docker Hub can cause runtime problems. If your organization has JFrog artifactory, you can change the registry</p></li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token key atrule">imageRegistry</span><span class="token punctuation">:</span> &lt;artifactory.myOrg.com<span class="token punctuation">&gt;</span>
  <span class="token key atrule">imagePullSecrets</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> &lt;docker<span class="token punctuation">-</span>pull<span class="token punctuation">-</span>secret<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The above settings assume you have setup secret &lt;docker-pull-secret&gt; to access &lt;artifactory.myOrg.com&gt;. The secret can be created using <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#create-a-secret-by-providing-credentials-on-the-command-line" target="_blank" rel="noopener noreferrer">kubectl<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><ul><li><p>Enable scheduled MongoDB backup CronJob</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">cronJob</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">schedule</span><span class="token punctuation">:</span> <span class="token string">&#39;1 0 * * *&#39;</span>
  <span class="token key atrule">retentionDays</span><span class="token punctuation">:</span> <span class="token number">7</span>
  <span class="token key atrule">timeZone</span><span class="token punctuation">:</span> UTC
  <span class="token key atrule">persistence</span><span class="token punctuation">:</span>
    <span class="token key atrule">size</span><span class="token punctuation">:</span> 5Gi
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>where</p><ul><li>enabled: whether to enable the MongoDB backup CronJob or not; default to <code>false</code></li><li>schedule: the Unix crontab schedule; default to <code>&#39;1 0 * * *&#39;</code> which runs daily at 12:01AM</li><li>retentionDays: how many days the backup is retained; default to <code>7</code></li><li>timeZone: the Unix TZ environment variable; default to <code>UTC</code></li><li>persistence size: size of PVC; default to <code>5Gi</code></li></ul><p>The CronJob backs up MongoDB to a PVC named after the chart with suffix <em>-cronjob-mongodb-backup</em> and purges backups that are older than <em>retentionDays</em>.</p><p>To facilitate restoration, mount the PVC to MongoDB pod</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">mongodb</span><span class="token punctuation">:</span>
  <span class="token key atrule">extraVolumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> export
      <span class="token key atrule">persistentVolumeClaim</span><span class="token punctuation">:</span>
        <span class="token key atrule">claimName</span><span class="token punctuation">:</span> &lt;PVC_NAME<span class="token punctuation">&gt;</span>
  <span class="token key atrule">extraVolumeMounts</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> export
      <span class="token key atrule">mountPath</span><span class="token punctuation">:</span> /export
      <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Restoration can then be achieved by running in MongoDB pod</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mongorestore <span class="token parameter variable">-u</span> <span class="token string">&quot;<span class="token variable">$MONGODB_USERNAME</span>&quot;</span> -p<span class="token string">&quot;<span class="token variable">$MONGODB_PASSWORD</span>&quot;</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--uri</span><span class="token operator">=</span><span class="token string">&quot;mongodb://<span class="token variable">$K8S_SERVICE_NAME</span>&quot;</span> <span class="token parameter variable">--db</span> <span class="token variable">$MONGODB_DATABASE</span> <span class="token parameter variable">--gzip</span> <span class="token parameter variable">--drop</span> <span class="token punctuation">\</span>
<span class="token parameter variable">--archive</span><span class="token operator">=</span>/export/<span class="token operator">&lt;</span>mongodb-backup-YYMMDD-hhmmss.gz<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><em>NotifyBC</em> image tag defaults to <em>appVersion</em> in file <em>helm/Chart.yaml</em>. To change to <em>latest</em>, i.e. tip of the <em>main</em> branch,</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">image</span><span class="token punctuation">:</span>
  <span class="token key atrule">tag</span><span class="token punctuation">:</span> latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Enable autoscaling for app pod</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token comment"># in file helm/values.local.yaml</span>
<span class="token key atrule">autoscaling</span><span class="token punctuation">:</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="deploy-docker-container" tabindex="-1"><a class="header-anchor" href="#deploy-docker-container" aria-hidden="true">#</a> Deploy Docker Container</h2><p>If you have git and Docker installed, you can run following command to deploy <em>NotifyBC</em> Docker container:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-dp</span> <span class="token number">3000</span>:3000 ghcr.io/bcgov/notify-bc
<span class="token comment"># open http://localhost:3000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>If successful, similar output is displayed as in source code installation.</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/NotifyBC/preview/docs/quickstart/" class="" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a></span><span class="next"><a href="/NotifyBC/preview/docs/web-console/" class="" aria-label="Web Console"><!--[--><!--]--> Web Console <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/NotifyBC/preview/assets/app-bafea29c.js" defer></script>
  </body>
</html>
