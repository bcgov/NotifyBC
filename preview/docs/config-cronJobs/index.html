<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.66">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" type="image/x-icon" href="/NotifyBC/preview/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title>Cron Jobs | NotifyBC</title><meta name="description" content="A versatile notification API server">
    <link rel="preload" href="/NotifyBC/preview/assets/style-8fbc3cfb.css" as="style"><link rel="stylesheet" href="/NotifyBC/preview/assets/style-8fbc3cfb.css">
    <link rel="modulepreload" href="/NotifyBC/preview/assets/app-6955f690.js"><link rel="modulepreload" href="/NotifyBC/preview/assets/index.html-2776b8bd.js"><link rel="modulepreload" href="/NotifyBC/preview/assets/index.html-88fcd172.js"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-692e45cb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7d2ae716.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7dc4890d.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-15fde261.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-93ff6c80.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-09f857ca.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-70c61dd5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a7337040.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f8b7a659.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-ced62edd.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a2d4ab5c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6b858d80.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-549ff1f9.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6e94f439.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c46be575.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a70b6cf1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a9eb55a1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f9768eb1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6bb621c5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-bc520f9b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-42466a4a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-3bc7b1c6.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-caa38aac.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-34c15120.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-2fb78bd6.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-963a4ecf.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-1d87c569.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-a0e9a4ad.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-76d114a5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-cdc6dd62.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-fae03536.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6ca7c7e1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-568e376b.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-ccd9b97c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-4c2b215a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-602c2540.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParam.html-d51cd871.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParamCode.html-293978be.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParamExample.html-c90c301f.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/jmespathFilter.html-7c48b0c1.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParam.html-10f3d62d.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParamCode.html-33176c09.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParamExample.html-68248e1c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-9d0f0553.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-fb076f2c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c1335507.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-d26d230e.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-e5f16da8.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-76af27e4.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-1b143c12.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6536f7d5.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-66a741e0.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-1e4cbe17.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7a5115b7.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-5f93b2ab.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-d4da66ce.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-306e26b9.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-bfbb62df.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-c9d0d9ae.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-e6c2a664.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-2b0de1f9.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-51d6afc3.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-e476d751.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-d6dd7585.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-e18d8791.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-26059f56.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7d17b7cb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-681e203f.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-2a92a98a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-b3d61eae.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-f50330ca.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-7b39dbd0.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-39ec8657.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-31e50487.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-138bae88.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-8b9dcee2.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-95e24076.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-aaa0a942.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index.html-6a3f4413.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParam.html-41bd7e37.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParamCode.html-c722fce3.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/filterQueryParamExample.html-8f1ff882.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/jmespathFilter.html-0b77beb9.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParam.html-a0a7e66c.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParamCode.html-e853d42a.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/whereQueryParamExample.html-e7f75ebe.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/404.html-a751633d.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/NotifyBC/preview/assets/index-5161ad19.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><div class="nb-navbar-brand"><a href="/NotifyBC/preview/" class=""><img class="logo" src="/NotifyBC/preview/img/logo.svg" alt="NotifyBC"></a><!----></div></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/NotifyBC/preview/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/docs/" class="router-link-active" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/help/" class="" aria-label="Help"><!--[--><!--]--> Help <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/notifybc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/NotifyBC/preview/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/docs/" class="router-link-active" aria-label="Docs"><!--[--><!--]--> Docs <!--[--><!--]--></a></div><div class="navbar-item"><a href="/NotifyBC/preview/help/" class="" aria-label="Help"><!--[--><!--]--> Help <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/bcgov/notifybc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Getting Started <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/" class="router-link-active sidebar-item" aria-label="Welcome"><!--[--><!--]--> Welcome <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/overview/" class="sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/quickstart/" class="sidebar-item" aria-label="Quick Start"><!--[--><!--]--> Quick Start <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/installation/" class="sidebar-item" aria-label="Installation"><!--[--><!--]--> Installation <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/web-console/" class="sidebar-item" aria-label="Web Console"><!--[--><!--]--> Web Console <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/what&#39;s-new/" class="sidebar-item" aria-label="What&#39;s New"><!--[--><!--]--> What&#39;s New <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">Configuration <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/config-overview/" class="sidebar-item" aria-label="Configuration Overview"><!--[--><!--]--> Configuration Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-database/" class="sidebar-item" aria-label="Database"><!--[--><!--]--> Database <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-adminIpList/" class="sidebar-item" aria-label="Admin IP List"><!--[--><!--]--> Admin IP List <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-reverseProxyIpLists/" class="sidebar-item" aria-label="Reverse Proxy IP Lists"><!--[--><!--]--> Reverse Proxy IP Lists <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-httpHost/" class="sidebar-item" aria-label="HTTP Host"><!--[--><!--]--> HTTP Host <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-internalHttpHost/" class="sidebar-item" aria-label="Internal HTTP Host"><!--[--><!--]--> Internal HTTP Host <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-email/" class="sidebar-item" aria-label="Email"><!--[--><!--]--> Email <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-sms/" class="sidebar-item" aria-label="SMS"><!--[--><!--]--> SMS <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-subscription/" class="sidebar-item" aria-label="Subscription"><!--[--><!--]--> Subscription <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-notification/" class="sidebar-item" aria-label="Notification"><!--[--><!--]--> Notification <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-nodeRoles/" class="sidebar-item" aria-label="Node Roles"><!--[--><!--]--> Node Roles <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Cron Jobs"><!--[--><!--]--> Cron Jobs <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#purge-data" class="router-link-active router-link-exact-active sidebar-item" aria-label="Purge Data"><!--[--><!--]--> Purge Data <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#dispatch-live-notifications" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dispatch Live Notifications"><!--[--><!--]--> Dispatch Live Notifications <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#check-rss-config-updates" class="router-link-active router-link-exact-active sidebar-item" aria-label="Check Rss Config Updates"><!--[--><!--]--> Check Rss Config Updates <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#delete-notification-bounces" class="router-link-active router-link-exact-active sidebar-item" aria-label="Delete Notification Bounces"><!--[--><!--]--> Delete Notification Bounces <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#re-dispatch-broadcast-push-notifications" class="router-link-active router-link-exact-active sidebar-item" aria-label="Re-dispatch Broadcast Push Notifications"><!--[--><!--]--> Re-dispatch Broadcast Push Notifications <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/NotifyBC/preview/docs/config-cronJobs/#clear-redis-datastore" class="router-link-active router-link-exact-active sidebar-item" aria-label="Clear Redis Datastore"><!--[--><!--]--> Clear Redis Datastore <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/NotifyBC/preview/docs/config-rsaKeys/" class="sidebar-item" aria-label="RSA Keys"><!--[--><!--]--> RSA Keys <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-workerProcessCount/" class="sidebar-item" aria-label="Worker Process Count"><!--[--><!--]--> Worker Process Count <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-middleware/" class="sidebar-item" aria-label="Middleware"><!--[--><!--]--> Middleware <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-oidc/" class="sidebar-item" aria-label="OIDC"><!--[--><!--]--> OIDC <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/config-certificates/" class="sidebar-item" aria-label="TLS Certificates"><!--[--><!--]--> TLS Certificates <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">API <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/api-overview/" class="sidebar-item" aria-label="API Overview"><!--[--><!--]--> API Overview <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-subscription/" class="sidebar-item" aria-label="Subscription"><!--[--><!--]--> Subscription <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-notification/" class="sidebar-item" aria-label="Notification"><!--[--><!--]--> Notification <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-config/" class="sidebar-item" aria-label="Configuration"><!--[--><!--]--> Configuration <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-administrator/" class="sidebar-item" aria-label="Administrator"><!--[--><!--]--> Administrator <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/api-bounce/" class="sidebar-item" aria-label="Bounce"><!--[--><!--]--> Bounce <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Miscellaneous <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/benchmarks/" class="sidebar-item" aria-label="Benchmarks"><!--[--><!--]--> Benchmarks <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/bulk-import/" class="sidebar-item" aria-label="Bulk Import"><!--[--><!--]--> Bulk Import <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/developer-notes/" class="sidebar-item" aria-label="Developer Notes"><!--[--><!--]--> Developer Notes <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/upgrade/" class="sidebar-item" aria-label="Upgrade Guide"><!--[--><!--]--> Upgrade Guide <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">Meta <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/NotifyBC/preview/docs/conduct/" class="sidebar-item" aria-label="Code of Conduct"><!--[--><!--]--> Code of Conduct <!--[--><!--]--></a><!----></li><li><a href="/NotifyBC/preview/docs/acknowledgments/" class="sidebar-item" aria-label="Acknowledgments"><!--[--><!--]--> Acknowledgments <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="cron-jobs" tabindex="-1"><a class="header-anchor" href="#cron-jobs" aria-hidden="true">#</a> Cron Jobs</h1><p><em>NotifyBC</em> runs several cron jobs described below. These jobs are controlled by sub-properties defined in config object <em>cron</em>. To change config, create the object and properties in file <em>/src/config.local.js</em>.</p><p>By default cron jobs are enabled. In a multi-node deployment, cron jobs should only run on the <a href="/NotifyBC/preview/docs/config-nodeRoles/" class="">master node</a> to ensure single execution.</p><p>All cron jobs have a property named <a name="timeSpec"></a><em>timeSpec</em> with the value of a space separated fields conforming to <a href="https://www.freebsd.org/cgi/man.cgi?crontab(5)" target="_blank" rel="noopener noreferrer">unix crontab format<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> with an optional left-most seconds field. See <a href="https://github.com/kelektiv/node-cron#cron-ranges" target="_blank" rel="noopener noreferrer">allowed ranges<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> of each field.</p><h2 id="purge-data" tabindex="-1"><a class="header-anchor" href="#purge-data" aria-hidden="true">#</a> Purge Data</h2><p>This cron job purges old notifications, subscriptions and notification bounces. The default frequency of cron job and retention policy are defined by <em>cron.purgeData</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    purgeData<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// daily at 1am</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 0 1 * * *&#39;</span><span class="token punctuation">,</span>
      pushNotificationRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      expiredInAppNotificationRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      nonConfirmedSubscriptionRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      deletedBounceRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      expiredAccessTokenRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      defaultRetentionDays<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>where</p><ul><li><em>pushNotificationRetentionDays</em>: the retention days of push notifications</li><li><em>expiredInAppNotificationRetentionDays</em>: the retention days of expired inApp notifications</li><li><em>nonConfirmedSubscriptionRetentionDays</em>: the retention days of non-confirmed subscriptions, i.e. all unconfirmed and deleted subscriptions</li><li><em>deletedBounceRetentionDays</em>: the retention days of deleted notification bounces</li><li>expiredAccessTokenRetentionDays: the retention days of expired access tokens</li><li><em>defaultRetentionDays</em>: if any of the above retention day config item is omitted, default retention days is used as fall back.</li></ul><p>To change a config item, set the config item in file <em>/src/config.local.js</em>. For example, to run cron jobs at 2am daily, add following object to <em>/src/config.local.js</em></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">cron</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">purgeData</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">timeSpec</span><span class="token operator">:</span> <span class="token string">&#39;0 0 2 * * *&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dispatch-live-notifications" tabindex="-1"><a class="header-anchor" href="#dispatch-live-notifications" aria-hidden="true">#</a> Dispatch Live Notifications</h2><p>This cron job sends out future-dated notifications when the notification becomes current. The default config is defined by <em>cron.dispatchLiveNotifications</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    dispatchLiveNotifications<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// minutely</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 * * * * *&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="check-rss-config-updates" tabindex="-1"><a class="header-anchor" href="#check-rss-config-updates" aria-hidden="true">#</a> Check Rss Config Updates</h2><p>This cron job monitors RSS feed notification dynamic config items. If a config item is created, updated or deleted, the cron job starts, restarts, or stops the RSS-specific cron job. The default config is defined by <em>cron.checkRssConfigUpdates</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    checkRssConfigUpdates<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// minutely</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 * * * * *&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note <em>timeSpec</em> doesn&#39;t control the RSS poll frequency (which is defined in dynamic configs and is service specific), instead it only controls the frequency to check for dynamic config changes.</p><h2 id="delete-notification-bounces" tabindex="-1"><a class="header-anchor" href="#delete-notification-bounces" aria-hidden="true">#</a> Delete Notification Bounces</h2><p>This cron job deletes notification bounces if the latest notification is deemed delivered successfully. The criteria of successful delivery are</p><ol><li>No bounce received since the latest notification started dispatching, and</li><li>a configured time span has lapsed since the latest notification finished dispatching</li></ol><p>The default config is defined by <em>cron.deleteBounces</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    deleteBounces<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// hourly</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 0 * * * *&#39;</span><span class="token punctuation">,</span>
      minLapsedHoursSinceLatestNotificationEnded<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>where</p><ul><li><em>minLapsedHoursSinceLatestNotificationEnded</em> is the time span</li></ul><h2 id="re-dispatch-broadcast-push-notifications" tabindex="-1"><a class="header-anchor" href="#re-dispatch-broadcast-push-notifications" aria-hidden="true">#</a> Re-dispatch Broadcast Push Notifications</h2><p>This cron job re-dispatches a broadcast push notifications when original request failed. It is part of <a href="/NotifyBC/preview/docs/config/notification.html#guaranteed-broadcast-push-dispatch-processing" class="">guaranteed broadcast push dispatch processing</a></p><p>The default config is defined by <em>cron.reDispatchBroadcastPushNotifications</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    reDispatchBroadcastPushNotifications<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// minutely</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 * * * * *&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="clear-redis-datastore" tabindex="-1"><a class="header-anchor" href="#clear-redis-datastore" aria-hidden="true">#</a> Clear Redis Datastore</h2><p>This cron job clears Redis datastore used for SMS and email throttle. The job is enabled only if Redis is used. Datastore is cleared only when there is no broadcast push notifications in <em>sending</em> state. Without this cron job, updated throttle settings in config file will never take effect, and staled jobs in Redis datastore will not be cleaned up.</p><p>The default config is defined by <em>cron.clearRedisDatastore</em> config object in file <em>/src/config.ts</em></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  cron<span class="token operator">:</span> <span class="token punctuation">{</span>
    clearRedisDatastore<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// hourly</span>
      timeSpec<span class="token operator">:</span> <span class="token string">&#39;0 0 * * * *&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/NotifyBC/preview/docs/config-nodeRoles/" class="" aria-label="Node Roles"><!--[--><!--]--> Node Roles <!--[--><!--]--></a></span><span class="next"><a href="/NotifyBC/preview/docs/config-rsaKeys/" class="" aria-label="RSA Keys"><!--[--><!--]--> RSA Keys <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/NotifyBC/preview/assets/app-6955f690.js" defer></script>
  </body>
</html>
