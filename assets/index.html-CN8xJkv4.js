import{_ as s,c as a,e,o as p}from"./app-TkwNE_-e.js";const t={};function l(o,n){return p(),a("div",null,n[0]||(n[0]=[e(`<h1 id="middleware" tabindex="-1"><a class="header-anchor" href="#middleware"><span>Middleware</span></a></h1><p><em>NotifyBC</em> pre-installed following <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">Express</a> middleware as defined in <em>src/middleware.ts</em></p><ul><li><a href="https://www.npmjs.com/package/compression" target="_blank" rel="noopener noreferrer">compression</a></li><li><a href="https://www.npmjs.com/package/helmet" target="_blank" rel="noopener noreferrer">helmet</a></li><li><a href="https://www.npmjs.com/package/morgan" target="_blank" rel="noopener noreferrer">morgan</a> (disabled by default)</li></ul><p><em>src/middleware.ts</em> contains following default middleware settings</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">&#39;path&#39;</span><span class="token punctuation">;</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  all<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    compression<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  apiOnly<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    helmet<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    morgan<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      params<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string">&#39;:remote-addr - :remote-user [:date[clf]] &quot;:method :url HTTP/:http-version&quot; :status &quot;:req[X-Forwarded-For]&quot;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      enabled<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>src/middleware.ts</em> has following structure</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  all<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;&lt;middlewareName&gt;&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>params<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> enabled<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  apiOnly<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;&lt;middlewareName&gt;&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>params<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> enabled<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Middleware defined under <em>all</em> applies to both API and web console requests, as opposed to <em>apiOnly</em>, which applies to API requests only. <em>params</em> are passed to middleware function as arguments. <em>enabled</em> toggles the middleware on or off.</p><p>To change default settings defined in <em>src/middleware.ts</em>, create file <em>src/middleware.local.ts</em> or <em>src/middleware.&lt;env&gt;.ts</em> to override. For example, to enable access log,</p><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  apiOnly<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    morgan<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)]))}const c=s(t,[["render",l],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/docs/config-middleware/","title":"Middleware","lang":"en-US","frontmatter":{"permalink":"/docs/config-middleware/"},"headers":[],"git":{},"filePathRelative":"docs/config/middleware.md"}');export{c as comp,r as data};
